@{
    var siteSettings = ViewData["SiteSettings"] as BalonPark.Models.Settings;
    var companyName = siteSettings?.CompanyName ?? "Balon Park Şişme Oyun Grupları";
    var defaultDescription = $"{companyName} - Türkiye'nin en kaliteli şişme oyun parkları, kaydıraklar, havuzlar ve çocuk oyun grupları. Güvenli, dayanıklı ve eğlenceli ürünler. Hızlı teslimat ve uygun fiyatlar.";
    var rawCategories = ViewData["Categories"];
    var headerCategories = rawCategories as List<BalonPark.Models.Category>;
    if (headerCategories == null && rawCategories is System.Collections.IEnumerable en)
    {
        headerCategories = new List<BalonPark.Models.Category>();
        foreach (var item in en) { if (item is BalonPark.Models.Category c) headerCategories.Add(c); }
    }
    headerCategories ??= new List<BalonPark.Models.Category>();

    var sameAsLinks = new List<string>();
    if (!string.IsNullOrEmpty(siteSettings?.WhatsApp))
        sameAsLinks.Add($"https://wa.me/{siteSettings.WhatsApp.Replace("+", "").Replace(" ", "")}");
    if (!string.IsNullOrEmpty(siteSettings?.Facebook))
        sameAsLinks.Add(siteSettings.Facebook);
    if (!string.IsNullOrEmpty(siteSettings?.Instagram))
        sameAsLinks.Add(siteSettings.Instagram);
    if (!string.IsNullOrEmpty(siteSettings?.Twitter))
        sameAsLinks.Add(siteSettings.Twitter);
    if (!string.IsNullOrEmpty(siteSettings?.LinkedIn))
        sameAsLinks.Add(siteSettings.LinkedIn);
    if (!string.IsNullOrEmpty(siteSettings?.YouTube))
        sameAsLinks.Add(siteSettings.YouTube);

    var logoUrl = siteSettings?.Logo != null ? (((IUrlService?)ViewData["UrlService"])?.GetImageUrl(siteSettings.Logo) ?? siteSettings.Logo) : (((IUrlService?)ViewData["UrlService"])?.GetImageUrl("/assets/images/logo/logo.png") ?? "~/assets/images/logo/logo.png");
}
<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="@Html.Raw(ViewData["Description"] ?? siteSettings?.MetaDescription ?? defaultDescription)">
    <meta name="keywords"
        content="@Html.Raw(ViewData["Keywords"] ?? siteSettings?.MetaKeywords ?? "şişme oyun parkı, şişme kaydırak, şişme havuz, şişme rodeo, top havuzu, iç mekan oyun parkları, trambolin, softplay oyuncaklar, yer balonları, balon tak, fly tüp, şişme kostüm, reklam balonları, balon park, çocuk oyun grupları, şişme oyuncaklar, çocuk parkı, oyun alanı")">
    <meta name="author" content="@Html.Raw(companyName)">
    <meta name="publisher" content="@Html.Raw(companyName)">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="language" content="tr">
    <meta name="revisit-after" content="1 days">
    <meta name="rating" content="general">
    <meta name="distribution" content="global">
    <meta name="geo.region" content="TR">
    <meta name="geo.country" content="Turkey">
    <meta name="geo.placename" content="Türkiye">
    <meta name="theme-color" content="#00A8E8">
    <meta name="msapplication-TileColor" content="#00A8E8">
    <meta name="msapplication-TileImage" content="@(siteSettings?.Logo != null ? (((IUrlService?)ViewData["UrlService"])?.GetImageUrl(siteSettings.Logo) ?? siteSettings.Logo) : (((IUrlService?)ViewData["UrlService"])?.GetImageUrl("/assets/images/logo/logo.png") ?? "~/assets/images/logo/logo.png"))" />
    
    @if (!string.IsNullOrEmpty(siteSettings?.GoogleSiteVerification))
    {
        <!-- Google Site Verification (Admin Ayarlardan güncellenir) -->
        <meta name="google-site-verification" content="@siteSettings.GoogleSiteVerification">
    }
    @if (!string.IsNullOrEmpty(siteSettings?.GoogleTag))
    {
        <!-- Google tag (gtag.js) - Admin Ayarlardan güncellenir -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=@siteSettings.GoogleTag"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', '@siteSettings.GoogleTag');
        </script>
    }
    @if (!string.IsNullOrEmpty(siteSettings?.GoogleTagManager))
    {
        <!-- Google Tag Manager - Admin Ayarlardan güncellenir -->
        <script>
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','@siteSettings.GoogleTagManager');
        </script>
    }

    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="@(ViewData["Image"] != null && ViewData["Image"]?.ToString()?.Contains("uploads") == true ? "product" : "website")">
    <meta property="og:title" content="@Html.Raw(ViewData["Title"] ?? siteSettings?.MetaTitle ?? companyName)">
    <meta property="og:description"
        content="@Html.Raw(ViewData["Description"] ?? siteSettings?.MetaDescription ?? defaultDescription)">
    <meta property="og:image" content="@(ViewData["Image"] ?? ((IUrlService?)ViewData["UrlService"])?.GetImageUrl("/assets/images/logo/logo.png") ?? $"{Context.Request.Scheme}://{Context.Request.Host}/assets/images/logo/logo.png")">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="@Html.Raw(ViewData["Title"] ?? companyName)">
    <meta property="og:url"
        content="@(((IUrlService?)ViewData["UrlService"])?.GetPageUrl($"{Context.Request.Path}{Context.Request.QueryString}") ?? $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}{Context.Request.QueryString}")">
    <meta property="og:site_name" content="@Html.Raw(companyName)">
    <meta property="og:locale" content="tr_TR">
    
    @if (ViewData["ProductPrice"] != null)
    {
        <meta property="product:price:amount" content="@ViewData["ProductPrice"]">
        <meta property="product:price:currency" content="@ViewData["ProductCurrency"]">
        <meta property="product:availability" content="@ViewData["ProductAvailability"]">
        <meta property="product:condition" content="@ViewData["ProductCondition"]">
        <meta property="product:brand" content="@ViewData["ProductBrand"]">
        <meta property="product:retailer_item_id" content="@ViewData["ProductSku"]">
    }

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="@(ViewData["ProductPrice"] != null ? "summary_large_image" : "summary_large_image")">
    <meta name="twitter:title" content="@Html.Raw(ViewData["Title"] ?? siteSettings?.MetaTitle ?? companyName)">
    <meta name="twitter:description"
        content="@Html.Raw(ViewData["Description"] ?? siteSettings?.MetaDescription ?? defaultDescription)">
    <meta name="twitter:image" content="@(ViewData["Image"] ?? ((IUrlService?)ViewData["UrlService"])?.GetImageUrl("/assets/images/logo/logo.png") ?? $"{Context.Request.Scheme}://{Context.Request.Host}/assets/images/logo/logo.png")">
    <meta name="twitter:image:alt" content="@Html.Raw(ViewData["Title"] ?? companyName)">
    <meta name="twitter:site" content="@@balonpark">
    <meta name="twitter:creator" content="@@balonpark">

    <!-- Additional SEO -->
    <meta name="theme-color" content="#FFFFFF">
    <meta name="msapplication-TileColor" content="#fdfdfe">
    <link rel="canonical"
        href="@(((IUrlService?)ViewData["UrlService"])?.GetPageUrl($"{Context.Request.Path}{Context.Request.QueryString}") ?? $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}{Context.Request.QueryString}")">
    @if (ViewData["PrevUrl"] != null)
    {
        <link rel="prev" href="@ViewData["PrevUrl"]">
    }
    @if (ViewData["NextUrl"] != null)
    {
        <link rel="next" href="@ViewData["NextUrl"]">
    }

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@@context": "https://schema.org",
        "@@type": ["Organization", "LocalBusiness", "Store"],
        "name": "@Html.Raw(companyName)",
        "alternateName": "@Html.Raw(companyName.Replace(" ", ""))",
        "description": "@Html.Raw(siteSettings?.About ?? defaultDescription)",
        "url": "@(((IUrlService?)ViewData["UrlService"])?.GetPageUrl($"{Context.Request.Path}{Context.Request.QueryString}") ?? $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}{Context.Request.QueryString}")",
        "logo": "@(siteSettings?.Logo != null ? (((IUrlService?)ViewData["UrlService"])?.GetImageUrl(siteSettings.Logo) ?? $"{Context.Request.Scheme}://{Context.Request.Host}{siteSettings.Logo}") : (((IUrlService?)ViewData["UrlService"])?.GetImageUrl("/assets/images/logo/logo.png") ?? $"{Context.Request.Scheme}://{Context.Request.Host}/assets/images/logo/logo.png"))",
        "image": "@(siteSettings?.Logo != null ? (((IUrlService?)ViewData["UrlService"])?.GetImageUrl(siteSettings.Logo) ?? $"{Context.Request.Scheme}://{Context.Request.Host}{siteSettings.Logo}") : (((IUrlService?)ViewData["UrlService"])?.GetImageUrl("/assets/images/logo/logo.png") ?? $"{Context.Request.Scheme}://{Context.Request.Host}/assets/images/logo/logo.png"))",
        "sameAs": [@Html.Raw(string.Join(", ", sameAsLinks.Select(l => $"\"{l}\"")))],
        "contactPoint": {
            "@@type": "ContactPoint",
            "contactType": "customer service",
            "telephone": "@Html.Raw(siteSettings?.PhoneNumber ?? "")",
            "email": "@Html.Raw(siteSettings?.Email ?? "")",
            "availableLanguage": ["Turkish", "English"],
            "contactOption": "TollFree",
            "areaServed": "TR",
            "hoursAvailable": {
                "@@type": "OpeningHoursSpecification",
                "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                "opens": "00:00",
                "closes": "23:59"
            }
        },
        "address": {
            "@@type": "PostalAddress",
            "streetAddress": "@Html.Raw(siteSettings?.Address ?? "")",
            "addressLocality": "@Html.Raw(siteSettings?.City ?? "Türkiye")",
            "addressRegion": "@Html.Raw(siteSettings?.District ?? "")",
            "postalCode": "@Html.Raw(siteSettings?.PostalCode ?? "")",
            "addressCountry": "@Html.Raw(siteSettings?.Country ?? "TR")"
        },
        "foundingDate": "2020",
        "numberOfEmployees": "10-50",
        "industry": "Manufacturing",
        "knowsAbout": [
            "@Html.Raw("Şişme Oyun Parkları")",
            "@Html.Raw("Çocuk Oyun Grupları")",
            "@Html.Raw("Şişme Kaydıraklar")",
            "@Html.Raw("Şişme Havuzlar")",
            "@Html.Raw("Top Havuzları")",
            "@Html.Raw("İç Mekan Oyun Parkları")",
            "@Html.Raw("Şişme Oyuncakları")",
            "@Html.Raw("Şişme Kostümleri")",
            "@Html.Raw("Şişme Reklam Balonları")"
        ],
        "aggregateRating": {
            "@@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "250",
            "bestRating": "5",
            "worstRating": "1"
        },
        "priceRange": "$$"
    }
    </script>

    <!-- Favicon -->
    <link rel="icon" href="@logoUrl" type="image/png">
    <link rel="shortcut icon" href="@logoUrl" type="image/png">
    <link rel="apple-touch-icon" href="@logoUrl">
    <link rel="icon" sizes="32x32" href="@logoUrl">
    <link rel="icon" sizes="16x16" href="@logoUrl">
    @{
        var pageTitle = ViewData["Title"]?.ToString() ?? siteSettings?.MetaTitle ?? companyName ?? "";
        var titleMaxLength = 60;
        var titleForTag = pageTitle.Length > titleMaxLength ? pageTitle.Substring(0, titleMaxLength - 1).TrimEnd() + "…" : pageTitle;
    }
    <title>@Html.Raw(titleForTag)</title>

    <!-- Tailwind CSS (built; run "npm run build:css" in BalonPark to rebuild) -->
    <link href="~/css/tailwind.css" rel="stylesheet">
    <link href="~/css/favorites-compare.css" rel="stylesheet">
    <link href="~/css/layout.css" rel="stylesheet">
    <!-- Swiper (carousel) - required for ProductDetail gallery and category slider -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <!-- Lucide Icons (best practice: fixed version, tree-shake via data-lucide) -->
    <script src="https://cdn.jsdelivr.net/npm/lucide@0.526.0/dist/umd/lucide.min.js" crossorigin="anonymous"></script>
    <!-- Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    @await RenderSectionAsync("Styles", required: false)

    <!-- SweetAlert2: onay diyaloğu (confirm yerine) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link href="~/css/swal-theme.css" rel="stylesheet">

    <!-- Blog Structured Data -->
    @if (ViewData["StructuredData"] != null)
    {
        <script type="application/ld+json">
            @Html.Raw(ViewData["StructuredData"])
        </script>
    }

    @await RenderSectionAsync("Head", required: false)

</head>

<body class="font-sans text-[15px] sm:text-base bg-white text-ink antialiased min-h-screen flex flex-col">
@if (!string.IsNullOrEmpty(siteSettings?.GoogleTagManager))
{
<!-- Google Tag Manager (noscript) - Admin Ayarlardan güncellenir -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=@siteSettings.GoogleTagManager" height="0" width="0" class="gtm-noscript-iframe" title="GTM"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
}

<div class="main-wrapper layout-app">

    <!-- Sidebar sol, sabit; header sağda sabit; orta alan scroll -->
    <aside id="layout-sidebar" class="layout-sidebar" aria-label="Kategori menüsü">
        <div class="layout-sidebar-inner">
            <a asp-page="/Index" class="layout-sidebar-logo" aria-label="@Html.Raw(companyName) - Ana Sayfa">
                <img src="@logoUrl" alt="@Html.Raw(companyName)" width="160" height="48" loading="eager" class="layout-sidebar-logo__img">
            </a>
            <div class="layout-sidebar-header">
                <h2 class="layout-sidebar-title">
                    <span class="layout-sidebar-title-accent" aria-hidden="true"></span>
                    <span class="layout-sidebar-title-icon" aria-hidden="true"><i data-lucide="layers" class="w-5 h-5"></i></span>
                    <span class="layout-sidebar-title-text">Kategoriler</span>
                </h2>
                <button type="button" id="layout-sidebar-close" class="layout-sidebar-close" aria-label="Menüyü kapat">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            <div class="layout-sidebar-scroll">
                <nav class="category-tree" role="navigation" aria-label="Ürün kategorileri">
                    @{
                        var urlService = (IUrlService?)ViewData["UrlService"];
                    }
                    @if (headerCategories.Count > 0)
                    {
                        var activeCatSlug = ViewData["ActiveCategorySlug"]?.ToString() ?? "";
                        var activeSubSlug = ViewData["ActiveSubCategorySlug"]?.ToString() ?? "";
                        <ul class="category-tree-list">
                            @foreach (var cat in headerCategories)
                            {
                                var hasSubs = cat.SubCategories != null && cat.SubCategories.Count > 0;
                                var isCatActive = string.Equals(cat.Slug, activeCatSlug, StringComparison.OrdinalIgnoreCase);
                                var isChildActive = hasSubs && cat.SubCategories!.Any(sc => string.Equals(sc.Slug, activeSubSlug, StringComparison.OrdinalIgnoreCase));
                                var childrenExpanded = isCatActive || isChildActive;
                                <li class="category-tree-item" data-category-id="@cat.Id">
                                    <a href="/category/@cat.Slug" class="category-tree-link @(isCatActive && string.IsNullOrEmpty(activeSubSlug) ? "category-tree-link-active" : "")">
                                        @if (!string.IsNullOrEmpty(cat.FirstProductImage))
                                        {
                                            <span class="category-tree-icon category-tree-icon-img"><img src="@(urlService?.GetImageUrl(cat.FirstProductImage) ?? cat.FirstProductImage)" alt="" loading="lazy"></span>
                                        }
                                        else
                                        {
                                            <span class="category-tree-icon category-tree-icon-default"><i data-lucide="folder" class="w-5 h-5"></i></span>
                                        }
                                        <span class="category-tree-label">@Html.Raw(cat.Name)</span>
                                        @if (hasSubs)
                                        {
                                            <span class="category-tree-chevron" role="button" tabindex="0" aria-expanded="@(childrenExpanded ? "true" : "false")" aria-controls="category-children-@cat.Id" title="Alt kategorileri aç/kapat"><i data-lucide="chevron-right" class="category-tree-chevron-icon"></i></span>
                                        }
                                    </a>
                                    @if (hasSubs)
                                    {
                                        <ul id="category-children-@cat.Id" class="category-tree-children @(childrenExpanded ? "" : "hidden")" role="group" aria-label="@cat.Name alt kategorileri">
                                            @foreach (var sub in cat.SubCategories!)
                                            {
                                                var isSubActive = string.Equals(sub.Slug, activeSubSlug, StringComparison.OrdinalIgnoreCase);
                                                <li class="category-tree-child">
                                                    <a href="/category/@cat.Slug/@sub.Slug" class="category-tree-child-link @(isSubActive ? "category-tree-child-link-active" : "")">
                                                        <i data-lucide="chevron-right" class="category-tree-child-chevron"></i>
                                                        <span class="category-tree-child-label">@Html.Raw(sub.Name)</span>
                                                    </a>
                                                </li>
                                            }
                                        </ul>
                                    }
                                </li>
                            }
                        </ul>
                    }
                    else
                    {
                        <p class="category-tree-empty">Kategori bulunamadı.</p>
                    }
                </nav>

                <!-- Sertifikalarımız kutusu – kategorilerle aynı scroll alanında -->
                <a asp-page="/Sertifikalar" class="sidebar-certificates-box" aria-label="Sertifikalarımız sayfası">
                    <div class="sidebar-certificates-box__inner">
                        <span class="sidebar-certificates-box__icon" aria-hidden="true">
                            <i data-lucide="award" class="sidebar-certificates-box__icon-svg"></i>
                        </span>
                        <div class="sidebar-certificates-box__content">
                            <h3 class="sidebar-certificates-box__title">Sertifikalarımız</h3>
                            <p class="sidebar-certificates-box__desc">Kalite ve güvenlik belgelerimiz</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </aside>
    <div id="layout-sidebar-overlay" class="layout-sidebar-overlay" aria-hidden="true"></div>

    <div class="layout-right">
    <header class="site-header" id="main-header" role="banner">
        <!-- Main header row -->
        <div class="site-header__main">
            <div class="site-header__inner site-header__row">
                <div class="site-header__start">
                    <button type="button" id="header-sidebar-toggle" class="site-header__menu-btn" aria-label="Kategori menüsünü aç" aria-expanded="false" aria-controls="layout-sidebar">
                        <i data-lucide="menu" class="site-header__menu-icon" aria-hidden="true"></i>
                    </button>
                    <nav class="site-header__nav" aria-label="Ana sayfa menüsü">
                        <a asp-page="/Index" class="site-header__nav-link" title="Ana Sayfa">Ana Sayfa</a>
                        <a asp-page="/ProductList" class="site-header__nav-link" title="Ürünler">Ürünler</a>
                        <a asp-page="/Hakkimizda" class="site-header__nav-link" title="Hakkımızda">Hakkımızda</a>
                        <a asp-page="/Blog" class="site-header__nav-link" title="Blog">Blog</a>
                        <a asp-page="/Iletisim" class="site-header__nav-link" title="İletişim">İletişim</a>
                    </nav>
                </div>

                <div class="site-header__search" id="header-search-wrap-desktop">
                    <form action="/Search" method="get" class="site-header__search-form" role="search" aria-label="Ürün veya kategori ara">
                        <label for="header-search-input-desktop" class="sr-only">Arama</label>
                        <input type="search" name="q" id="header-search-input-desktop" class="header-search-input site-header__search-input" placeholder="Ürün veya kategori ara..." autocomplete="off" aria-label="Arama" aria-autocomplete="list" aria-expanded="false" aria-controls="header-search-dropdown" aria-haspopup="listbox" aria-activedescendant="">
                        <button type="submit" class="site-header__search-btn" aria-label="Ara">
                            <i data-lucide="search" class="site-header__search-icon" aria-hidden="true"></i>
                        </button>
                    </form>
                    <div id="header-search-dropdown" class="site-header__search-dropdown header-search-dropdown-closed" role="listbox" aria-label="Arama önerileri">
                        <div id="header-search-trending" class="site-header__search-dropdown-section hidden">
                            <p class="site-header__search-dropdown-title">Trend aramalar</p>
                            <div id="header-search-trending-list" class="site-header__search-dropdown-tags"></div>
                        </div>
                        <div id="header-search-recent" class="site-header__search-dropdown-section hidden">
                            <p class="site-header__search-dropdown-title">Son aramalar</p>
                            <ul id="header-search-recent-list" class="site-header__search-dropdown-list" role="list"></ul>
                        </div>
                        <div id="header-search-suggestions" class="site-header__search-dropdown-section hidden">
                            <p class="site-header__search-dropdown-title">Öneriler</p>
                            <ul id="header-search-suggestions-list" class="site-header__search-dropdown-list" role="list"></ul>
                        </div>
                        <p id="header-search-loading" class="site-header__search-dropdown-loading hidden">Yükleniyor...</p>
                        <p id="header-search-empty" class="site-header__search-dropdown-empty hidden">Sonuç bulunamadı.</p>
                    </div>
                </div>

                <div class="site-header__end">
                @{
                    var phoneMobDisplay = siteSettings?.PhoneNumber ?? "";
                    var showPhoneMob = !string.IsNullOrEmpty(phoneMobDisplay);
                    var telHrefMob = showPhoneMob ? "tel:" + new string(phoneMobDisplay.Where(c => char.IsDigit(c) || c == '+').ToArray()) : "";
                }
                @if (showPhoneMob)
                {
                    <a href="@telHrefMob" class="site-header__phone-mob site-header__action" aria-label="Bizi arayın: @phoneMobDisplay" title="@phoneMobDisplay">
                        <i data-lucide="phone" class="site-header__action-icon" aria-hidden="true"></i>
                    </a>
                }
                else
                {
                    <a asp-page="/Iletisim" class="site-header__phone-mob site-header__action" aria-label="İletişim sayfası" title="İletişim">
                        <i data-lucide="phone" class="site-header__action-icon" aria-hidden="true"></i>
                    </a>
                }

                <div class="site-header__actions">
                    <a href="#" id="header-favorites-btn" class="site-header__action" aria-label="Favorilerim" title="Favoriler">
                        <i data-lucide="heart" class="site-header__action-icon lucide-fav-header" aria-hidden="true"></i>
                        <span class="site-header__action-badge favorites-count-text" aria-hidden="true">0</span>
                    </a>
                    <a href="#" id="header-compare-btn" class="site-header__action" aria-label="Ürün karşılaştır" title="Karşılaştır">
                        <i data-lucide="shuffle" class="site-header__action-icon" aria-hidden="true"></i>
                        <span class="site-header__action-badge compare-count-text" aria-hidden="true">0</span>
                    </a>
                    <button type="button" class="currency-btn site-header__action @(ViewData["SelectedCurrency"]?.ToString() == "TL" ? "site-header__action--active" : "")" data-currency="TL" aria-label="Türk Lirası" aria-pressed="@(ViewData["SelectedCurrency"]?.ToString() == "TL")" title="TL"><i data-lucide="badge-turkish-lira" class="site-header__action-icon" aria-hidden="true"></i></button>
                    <button type="button" class="currency-btn site-header__action @(ViewData["SelectedCurrency"]?.ToString() == "USD" ? "site-header__action--active" : "")" data-currency="USD" aria-label="Amerikan Doları" aria-pressed="@(ViewData["SelectedCurrency"]?.ToString() == "USD")" title="USD"><i data-lucide="dollar-sign" class="site-header__action-icon" aria-hidden="true"></i></button>
                    <button type="button" class="currency-btn site-header__action @(ViewData["SelectedCurrency"]?.ToString() == "EUR" ? "site-header__action--active" : "")" data-currency="EUR" aria-label="Euro" aria-pressed="@(ViewData["SelectedCurrency"]?.ToString() == "EUR")" title="Euro"><i data-lucide="euro" class="site-header__action-icon" aria-hidden="true"></i></button>
                </div>
                </div>
            </div>
        </div>
    </header>

        <main class="layout-main">
            <div class="main-content w-full px-3 sm:px-4 lg:px-6 py-4 sm:py-6">
                @RenderBody()
            </div>

    @if (!string.IsNullOrEmpty(siteSettings?.WhatsApp))
    {
        var whatsAppNumber = new string(siteSettings.WhatsApp.Where(c => char.IsDigit(c)).ToArray());
        if (!string.IsNullOrEmpty(whatsAppNumber))
        {
            <!-- WhatsApp FAB (Admin Ayarlardan güncellenir) -->
            <a href="https://wa.me/@whatsAppNumber" target="_blank" rel="noopener noreferrer" class="fixed bottom-6 right-6 z-40 w-14 h-14 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:bg-[#20bd5a] hover:scale-110 transition-all" aria-label="WhatsApp ile iletişime geç" title="WhatsApp ile iletişime geç">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
            </a>
        }
    }

            <footer class="bg-white border-t border-gray-200 mt-auto">
                <div class="w-full px-3 sm:px-4 lg:px-6 py-6">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                <p class="text-sm text-gray-600">© @DateTime.Now.Year @Html.Raw(companyName). Tüm hakları saklıdır.</p>
                <nav class="flex flex-wrap gap-4 text-sm">
                    <a asp-page="/Hakkimizda" class="text-gray-600 hover:text-primary" title="Hakkımızda">Hakkımızda</a>
                    <a asp-page="/Blog" class="text-gray-600 hover:text-primary" title="Blog">Blog</a>
                    <a asp-page="/Iletisim" class="text-gray-600 hover:text-primary" title="İletişim">İletişim</a>
                    <a asp-page="/Sitemap" class="text-gray-600 hover:text-primary" title="Site Haritası">Site Haritası</a>
                    <a asp-page="/Privacy" class="text-gray-600 hover:text-primary" title="Gizlilik Politikası">Gizlilik</a>
                    <a asp-page="/KullanimKosullari" class="text-gray-600 hover:text-primary" title="Kullanım Koşulları">Kullanım Koşulları</a>
                </nav>
                @if (!string.IsNullOrEmpty(siteSettings?.Facebook) || !string.IsNullOrEmpty(siteSettings?.Instagram) || !string.IsNullOrEmpty(siteSettings?.Twitter) || !string.IsNullOrEmpty(siteSettings?.LinkedIn) || !string.IsNullOrEmpty(siteSettings?.YouTube))
                {
                    <div class="flex gap-4 text-gray-500">
                        @if (!string.IsNullOrEmpty(siteSettings?.Facebook)) { <a href="@siteSettings.Facebook" target="_blank" rel="noopener noreferrer" class="hover:text-primary" aria-label="Facebook" title="Facebook"><i data-lucide="facebook" class="w-5 h-5"></i></a> }
                        @if (!string.IsNullOrEmpty(siteSettings?.Instagram)) { <a href="@siteSettings.Instagram" target="_blank" rel="noopener noreferrer" class="hover:text-primary" aria-label="Instagram" title="Instagram"><i data-lucide="instagram" class="w-5 h-5"></i></a> }
                        @if (!string.IsNullOrEmpty(siteSettings?.Twitter)) { <a href="@siteSettings.Twitter" target="_blank" rel="noopener noreferrer" class="hover:text-primary" aria-label="Twitter" title="Twitter"><i data-lucide="twitter" class="w-5 h-5"></i></a> }
                        @if (!string.IsNullOrEmpty(siteSettings?.LinkedIn)) { <a href="@siteSettings.LinkedIn" target="_blank" rel="noopener noreferrer" class="hover:text-primary" aria-label="LinkedIn" title="LinkedIn"><i data-lucide="linkedin" class="w-5 h-5"></i></a> }
                        @if (!string.IsNullOrEmpty(siteSettings?.YouTube)) { <a href="@siteSettings.YouTube" target="_blank" rel="noopener noreferrer" class="hover:text-primary" aria-label="YouTube" title="YouTube"><i data-lucide="youtube" class="w-5 h-5"></i></a> }
                    </div>
                }
                    </div>
                </div>
            </footer>
        </main>
    </div>

</div> <!-- main-wrapper end -->

    <!-- Critical JavaScript (loaded immediately) -->
    <script src="~/assets/js/jquery-3.6.0.min.js"></script>
    <script src="~/assets/js/bootstrap/bootstrap.bundle.min.js"></script>

    <!-- Non-critical JavaScript (loaded asynchronously) -->
    <script src="~/assets/js/bootstrap/popper.min.js" defer></script>
    <script src="~/assets/js/feather/feather.min.js" defer></script>
    <script src="~/assets/js/feather/feather-icon.js" defer></script>
    <script src="~/assets/js/lazysizes.min.js" defer></script>
    <script src="~/assets/js/slick/slick.js" defer></script>
    <script src="~/assets/js/slick/slick-animation.min.js" defer></script>
    <script src="~/assets/js/slick/custom_slick.js" defer></script>
    <script src="~/assets/js/auto-height.js" defer></script>
    <script src="~/assets/js/fly-cart.js" defer></script>
    <script src="~/assets/js/quantity-2.js" defer></script>
    <script src="~/assets/js/wow.min.js" defer></script>
    <script src="~/assets/js/custom-wow.js" defer></script>
    <script src="~/assets/js/script.js" defer></script>
    <script src="~/assets/js/theme-setting.js" defer></script>
    <script src="~/assets/semantic-ui/semantic.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>

    <!-- Snackbar (Material Design notifications) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css">
    <script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script>
    <script src="~/js/snackbar-helper.js"></script>

    <!-- Generic Tailwind modal (best practices: focus trap, Escape, backdrop, aria) -->
    <script src="~/js/modal-helper.js"></script>

    <!-- SweetAlert2 + swal-helper (confirm yerine) -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="~/js/swal-helper.js"></script>

    <!-- Favorites & Compare: load first so showFavorites/showCompare are defined -->
    <script src="~/js/favorites-compare.js"></script>
    <script src="~/js/site.js" defer></script>
    <script src="~/js/header-search-autocomplete.js" defer></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
