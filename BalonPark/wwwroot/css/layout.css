/**
 * Layout: header mega menü, mobil overlay, arama dropdown, GTM
 */

/* Proje genelinde Inter fontu */
html,
body {
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
}

/* Header mega menü: açık durumda görünür */
#header-mega-menu.header-mega-open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    pointer-events: auto;
}

/* Mobil menü overlay: açıkken görünür */
#header-mobile-menu-overlay.mobile-menu-overlay-open {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

@media (min-width: 768px) {
    #header-mobile-menu-overlay.mobile-menu-overlay-open {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
    }
}

/* Arama autocomplete: açılma animasyonu */
#header-search-dropdown {
    transform-origin: 50% 0;
    transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0.2s;
    max-height: min(70vh, 420px);
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.08), 0 10px 20px -4px rgb(0 0 0 / 0.08);
}

#header-search-dropdown.header-search-dropdown-closed {
    opacity: 0;
    visibility: hidden;
    transform: translateY(-6px) scaleY(0.96);
}

#header-search-dropdown.header-search-dropdown-open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scaleY(1);
}

#header-search-suggestions {
    max-height: 320px;
}

.header-search-input-expanded {
    border-bottom-left-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
}

/* GTM noscript iframe */
.gtm-noscript-iframe {
    display: none;
    visibility: hidden;
}

/* Ürün resimleri: lazy loading spinner */
.product-image-wrap {
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 120px;
    background: #f3f4f6;
    display: flex;
    align-items: center;
    justify-content: center;
}

.product-image-wrap .img-loading-spinner {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f9fafb;
    transition: opacity 0.2s ease;
    z-index: 1;
}

.product-image-wrap .img-loading-spinner.hidden {
    opacity: 0;
    pointer-events: none;
}

.product-image-wrap .img-loading-spinner::after {
    content: '';
    width: 32px;
    height: 32px;
    border: 3px solid #e5e7eb;
    border-top-color: #00A8E8;
    border-radius: 50%;
    animation: product-img-spin 0.7s linear infinite;
}

.product-image-wrap img {
    position: relative;
    z-index: 2;
    opacity: 0;
    transition: opacity 0.25s ease;
}

.product-image-wrap img.loaded {
    opacity: 1;
}

@keyframes product-img-spin {
    to {
        transform: rotate(360deg);
    }
}
